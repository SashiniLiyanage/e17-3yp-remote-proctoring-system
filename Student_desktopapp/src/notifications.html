<!DOCTYPE html>
<html>

<head>
    <title>Connexa</title>
    <link rel="stylesheet" href="css/header.css">
    <script defer src="js/header.js"></script>
    <style>
        .collapse {
            background: #fff;
            padding: 0.5rem 1rem;
            margin-bottom: 0.3rem;
        }
        
        .collapse-title {
            padding: 10px;
            cursor: pointer;
            user-select: none;
            background-color: rgba(38, 168, 170, 0.22);
        }
        
        .collapse-title::before {
            content: attr(data-after);
            padding-right: 10px;
            font-weight: bold;
        }
        
        .collapse-body {
            display: none;
            border: 2px solid rgba(38, 168, 170, 0.22);
            border-bottom: 2px solid rgba(38, 168, 170, 0.22);
            margin-top: 3px;
            padding-bottom: 10px;
            padding-top: 3px;
            padding-left: 30px;
        }
    </style>
</head>

<body onload="display_ct();">
    <div class="header">
        <div class="container1">
            <div class="title">
                <span>Notifications</span>
            </div>
        </div>
        <div class="container2">
            <div class="search">
                <input type="text" class="searchTerm" placeholder="search">
                <button type="submit" id="searchbtn" class="searchButton">
                 <i class="fa fa-search"></i>
              </button>
            </div>
        </div>
        <div class="container3">
            <div class="battery">
                <div class="container">
                    <div id="batBody">
                        <div id="indicator"></div>
                    </div>
                    <div class="batEnd">
                        <div></div>
                    </div>
                </div>
                <p id="batteryLevelOutput"></p>
            </div>
        </div>
        <div class="container4">
            <div class="notification">
                <img id="show_notifications" src="img/icons/notification.png">
                <span id="badge" class="badge">8</span>
            </div>
        </div>
    </div>

    <div class="timestamp" id="timestamp">
        <p>TIME TO HIT THE BOOKS! YOUR NEXT EXAM BEGINS IN:</p>
    </div>

    <div class="status" id="status"></div>

    <div class="timeindicator" id="timeindicator">
        <p class="time">2 : <span id="currenttime"></span></p>
        <p>DAYS : HOURS : MINUTES : SECONDS</p>
    </div>

    <!--hamburger menu-->
    <nav class="menu" tabindex="0">
        <div class="smartphone-menu-trigger"></div>
        <header class="avatar">
            <img id="avatar" class="online" src="img/user.jpg" />
            <h2 id="user_name">USER</h2>
        </header>
        <ul id="list">
            <li tabindex="0" id="home" class="icon-home"><span>Home</span></li>
            <li tabindex="0" id="dashboard" class="icon-dashboard"><span>Dashboard</span></li>
            <li tabindex="0" id="course" class="icon-courses"><span>Courses</span></li>
            <li tabindex="0" id="schedule" class="icon-schedule"><span>Exam Schedule</span></li>
            <li tabindex="0" id="notification" class="icon-notifications"><span>Notifications</span></li>
            <li tabindex="0" id="settings" class="icon-settings"><span>Settings</span></li>
            <li tabindex="0" id="help" class="icon-help"><span>Help</span></li>
        </ul>
    </nav>
    <!--body starts here-->
    <div class="separator2"></div>
    <div class="collapse">
        <div class="collapse-title">Notification 1</div>
        <div class="collapse-body">Lorem ipsum dolor sit amet consectetur adipisicing elit. Sint deserunt pariatur incidunt et odit repellat explicabo eaque quos assumenda aperiam rerum corporis ipsum, numquam reprehenderit necessitatibus quaerat architecto. Eveniet voluptatum
            fuga dolore, optio suscipit quibusdam obcaecati odio laudantium eligendi in?</div>
    </div>
    <div class="collapse">
        <div class="collapse-title">Notification 2</div>
        <div class="collapse-body">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Sint, officia dolores quis, quas maiores sequi architecto nesciunt saepe quia minima nisi repudiandae delectus enim et! Molestiae sit iusto harum fugiat!</div>
    </div>
    <div class="collapse">
        <div class="collapse-title">Notification 3</div>
        <div class="collapse-body">Lorem ipsum dolor sit amet consectetur adipisicing elit. Corrupti assumenda a eum similique beatae quo, illo omnis illum soluta velit accusantium sit quibusdam, ea officia inventore, minima cum esse minus consequatur optio ratione laborum consectetur
            earum? Quas velit natus earum.</div>
    </div>

    <script>
        /* This can be an external module */
        class Collapse {
            constructor(prefix = "collapse") {
                this.prefix = prefix;
                this.collapseList = [...document.getElementsByClassName(prefix)];
                registerCollapses(this);
                registerClickHandler(this);
            }
        }

        function registerCollapses(collapse) {
            let idCount = 0;
            collapse.collapseList.forEach((cl) => {
                if (cl.classList && cl.classList.contains(collapse.prefix)) {
                    let nodeList = [...cl.childNodes].filter((cn) => cn.nodeName == "DIV");
                    nodeList[0].dataset.toggle = idCount;
                    nodeList[0].dataset.after = "▽";
                    nodeList[1].dataset.id = idCount;
                    idCount++;
                }
            });
        }

        function registerClickHandler(collapse) {
            const collapses = document.getElementsByClassName(`${collapse.prefix}-title`);
            [...collapses].forEach((c) => {
                c.addEventListener("click", () => {
                    const id = c.dataset.toggle;
                    const body = document.querySelector(`[data-id="${id}"]`);
                    [...collapses].forEach((t) => {
                        t.dataset.after = "▽";
                    });
                    const bodies = document.getElementsByClassName(`${collapse.prefix}-body`);
                    [...bodies].forEach((b) => {
                        if (b != body) b.style.display = "none";
                    });
                    if (body.style.display == "none") {
                        body.style.display = "block";
                        c.dataset.after = "△";
                    } else {
                        body.style.display = "none";
                    }
                });
            });
        }

        /* This is the code to add in the script file*/
        /* The parameter should be the prefix of the Collapse */
        new Collapse("collapse");
    </script>
</body>

</html>